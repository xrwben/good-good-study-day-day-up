### 项目可能问到的（平时准备记录）

- 项目难点。（如何发现问题，解决思路，最后结果）
- 项目考虑过优化吗，你是如何优化的，思路是什么
- 项目的组织架构，你对它的现有架构的理解，哪些优点值得借鉴，哪些缺点需要改进
- 如果让你从0到1建一个项目，你考虑的点是什么，有哪些流程需要注意的
- 如何进行技术选型，需要考虑哪些点
- 项目中代码规范，你们项目有方案吗，你了解的代码规范有哪些方案。
- 说一说项目中你们是如何测试的，有哪些单元测试方案，能不能说一说
- 项目中引入TS的原因，为什么这么做

### 答案模板

- 描述问题：背景 + 现象 + 造成的影响
- 问题如何被解决：分析 + 解决
- 自己的成长：学到了什么 + 以后如何避免


### 项目遇到的问题【分期乐APP】

1、上传到npm的组件中使用了扩张运算符三个点，工程中已经安装了插件@babel/plugin-proposal-object-rest-spread但
还是报错，报You may need an appropriate loader to handle this file typ？

解决：原因是Balbel配置文件的问题，项目中用的是.babelrc.json，这个仅仅是应用在你的项目中的某个部分，而如果你要编译node_modules的话，则要使用babel.config.json文件名，
官方也在文档中推荐了使用Babel.config.json格式的配置文件

2、兜底信息如何设计与处理？比如网络断开或者接口异常时如何处理？

方案：第一步，我们可以先写一个插件，每次项目启动先去请求兜底的接口，然后把必显示的兜底数据存为本地json文件。

问题：为何不让后端给一份或者写死一份？

解决：给你的跟接口返回的可能会有差异，主动权在前端

问题：就是如果现在页面上渲染是正常的，然后重新将页面推到前台或切换回来的时候，网络变化了，这个时候会显示兜底的数据。

解决：兜底数据只有有首页进入页面的时候进行处理，如果有正常数据后如果显示网络或接口异常，则还是显示正常数据。

3、自定义下拉刷新问题，ios和Android实现不一样？

a.refresh组件高度viewHeight值问题，设置无效，测试iOS为refresh组件设置高度2倍，安卓好像每种机型都不一致，ios上划好像也会触发
b.滚动事件差异，安卓最大为0，而ios有弹性下拉，可以大于0
c.安卓下拉然后迅速上划，则滚动值最大可能不为0，可能为负数会出现错位再次下拉背景空白的情况

4、灰度期间，ios在另一台设备登录被挤出登录态时，页面数据下拉刷新更新异常，登录态的数据和未登录请求的数据都在，而安卓正常？

原因：请求到的数据会缓存下来，然后把重新请求到的数据和缓存的数据进行合并，所以导致异常，而ios和安卓实现机制不一样，ios退出登录
不会更新lx文件，而Android会更新到未命中灰度的lx文件，所以Android未能测试出来，如果等到全量上线则会表现出来异常。

解决：每次接口请求到数据都重置数据，不要进行合并，之前合并是因为数据需要从两个接口取，而重构后只需要一个接口即可。

5、507 Variant Also Negotiates 问题？

原因：被安全拦截了，第一次遇到


【weex开发】
1、text/div设置字体样式可能不一样，比如div设置font-weight属性可能不生效
2、background不能简写，必须background-color、background-image
3、Android每个div都需要显示定义宽高，通过元素内容撑开的在定位时无法正确渲染
4、text直接放在和flex:1同级的位置偶尔样式会失效，需要把text用div标签包一层
5、百度APP浏览H5导致session变动刷新退出到登录页
6、weex向上循环滚动，偶现第一个元素不动


【APP工厂】

6、Whistle代理导致webpack热更新失效

原因：代理配置了一个json文件的规则，而热更新也是.hot-update.json结尾的json文件，所以也命中了规则

解决：whistle添加 excludeFilter://\**/*.hot-update.json 规则


7、首页经常会提示请求异常？上报的code为-1但是接口正常返回？监控报表每天报2万多次，达到接口请求异常类型的95%

复现：从其他tab页切换回首页，然后立即下拉刷新

原因：首页切换到前台会请求一次数据，然后立即刷新又会请求一次，但是第一次请求还没有完成

解决：第一种是添加一个请求的时间戳参数， 第二种是控制请求，设置请求完成标志

8、静态托管服务自定义路径本地执行没有问题，发布到服务器部署服务启动接口报500，为何接口报错有点奇怪？

解决：原因是服务器没有创建静态服务的文件夹，处理是先判断目录是否存在，如果不存在则动态创建一个目录。

9、分布式系统，a机器请求接口获取静态文件路径，然后客户端open url地址命中b机器，导致html文件返回404

方案一：NFS（网络文件系统）
结果：行不通，公司没有这个服务

方案二：OSS（fastDFS）
结果：行不通，fastDFS好像只能上传单个文件，而报告是包含了html/css/js/images的一个文件夹

方案三：文件同步机制
结果：不可，如果有一百台机器或者更多呢

方案四：采用NODE服务的前置中间件进行前置校验后动态处理
结果：行不通，静态文件访问路劲似乎不走中间件？
测试：可行，中间件使用顺序会影响监听

方案五：通过NODE服务自身的代理能力+动态URL的方式进行处理
结果：未尝试

方案六：负载均衡器配置
在负载均衡器上配置会话保持（Session Persistence），确保用户在同一会话中的请求都被转发到同一台机器上。这样可以避免在文件同步过程中用户访问到不同的机器
结果：待验证可行性




### 项目遇到的问题【腾讯】

#### 一、考试系统

##### 问题

* Vue 2.7 Toast 单例全局引用刷新页面第一次才能显示，后面再次调用不显示

* 倒计时不准 setInterval

* 人脸核验需要https，生成图片上传

* 联通数据访问白屏

* 考试颁发电子证书，每次要canvas代码定制

##### 解决方式

* 自定义Toast，GitHub找问题提issue，确定问题锁版本

* setTimeout -> 睡眠 -> 更正时间 -> requestFrameAnimation

* 浏览器设置白名单，https, 本地证书

* 抓包 -> 联通数据 -> DNS解析问题，深圳地区有个CLB 没有绑IP实例，错误监控

* 证书管理系统，fabric二次封装






#### 二、腾讯学堂小程序

##### 问题

* 背景音乐

* 与H5同信

* 多行标签展开折叠